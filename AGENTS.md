# Repository Guidelines

## Project Structure & Module Organization
- `main/` contains the application entry point (`MainSensor.cpp`) and ESP-IDF component config.
- `components/` holds third-party and local components (BSEC2, OLED, QR code, extra Matter endpoints).
- `enclosure/` includes STL files for 3D-printed parts.
- `codex/SessionLog.m` records notable Codex session actions and rationale for traceability.
- `build/` is generated by ESP-IDF; do not edit or commit outputs.
- Top-level config files like `sdkconfig` and `sdkconfig.defaults` define build settings.

## Session Context Logging
- Record notable session context and actions in `codex/SessionLog.m` (append new entries per session).
- Recent session topics: Thread router eligibility, build verification, README alignment, wiring label clarification, and OLED auto-detection.

## Build, Test, and Development Commands
- `idf.py set-target esp32c6`: set the target MCU for the XIAO ESP32-C6.
- `idf.py build`: compile the firmware with ESP-IDF and Arduino components.
- `idf.py flash`: flash the firmware to a connected device.
- `idf.py monitor`: open the serial monitor (use for commissioning output and logs).
- `idf.py flash monitor`: common one-step flash + monitor loop.

## Coding Style & Naming Conventions
- Follow existing C++/Arduino style in `main/MainSensor.cpp`: 2-space indentation, braces on the same line, short helper functions near usage.
- Use `UPPER_SNAKE_CASE` for compile-time macros (e.g., `USE_OLED`) and `camelCase` for functions/variables.
- Prefer `static` for file-local helpers; keep global state grouped and commented.
- No formatter or linter config is present; keep changes consistent with surrounding code.

## Testing Guidelines
- No automated tests are defined in this repo.
- Validate changes manually using `idf.py flash monitor` and verify:
  - Matter commissioning output (QR/Manual code).
  - Sensor readings update at the expected interval.
  - OLED screen behavior if enabled.

## Commit & Pull Request Guidelines
- Commit messages in history are short, Title Case sentences (e.g., "Thread supported"). Keep them concise and descriptive.
- PRs should include a summary, hardware assumptions (board/sensor/display), and serial monitor snippets or photos when UI/output changes.
- Link related issues or hardware notes when applicable.

## Configuration & Secrets
- Treat `sdkconfig` as generated; prefer editing `sdkconfig.defaults` or `menuconfig` for shared defaults.
- Do not commit credentials or pairing data; commissioning codes should be treated as ephemeral output.
